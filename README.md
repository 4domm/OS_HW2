
# Операционные системы. ИДЗ №2
# Георгий Юрченко Романович БПИ224 
# Вариант 1
**Задача о парикмахере. В тихом городке есть парикмахерская.
Салон парикмахерской мал, работать в нем нем может только один
парикмахер, обслуживающий одного посетителя. Есть несколько
стульев для ожидания в очереди. Парикмахер всю жизнь обслуживает посетителей. Когда в салоне никого нет, он спит в кресле.
Когда посетитель приходит и видит спящего парикмахера, он будет
его, садится в кресло, и сидит в нем, пока парикмахер обслуживает
его. Если посетитель приходит, а парикмахер занят, то он встает
в очередь, садится на свободный стул и «засыпает». После стрижки парикмахер сам провожает посетителя. Если есть ожидающие
посетители, то парикмахер будит одного из них, ждет пока тот сядет в кресло парикмахера и начинает стрижку. Если никого нет,
он снова садится в свое кресло и засыпает до прихода посетителя.
Количество стульев для ожидания в очереди ограничено числом
N. Если стульев не хватает, то пришедший посетитель уходит.
Создать многопроцессное приложение, моделирующее рабочий день парикмахерской.
Парикмахера и каждого из посетителей моделировать в виде отдельных процессов. Последние могут независимо порождаться в
произвольное время и завершать работу после их обслуживания.**

## Программа на 4-5 баллов
## Множество процессов взаимодействуют с использованием именованных POSIX семафоров. Обмен данными ведется через разделяемую память в стандарте POSIX.

Этот код реализует симуляцию работы парикмахерской с использованием процессов и семафоров в языке программирования C.

В начале программы определяются необходимые структуры данных и семафоры. Затем создаются процессы для парикмахера и клиентов. Каждый процесс выполняет свою роль:

Парикмахер (barberProcess): Процесс в котором парикмахер проверяет, есть ли ожидающие клиенты. Если есть, он принимает первого клиента из очереди, обслуживает его (задержка симулирует время стрижки), после чего отправляет клиента дальше. Если очередь пуста, парикмахер засыпает, ожидая сигнала о приходе клиента.

Клиенты (customerProcess): Каждый клиент сначала ждет случайное время (подразумевая, что они идут в парикмахерскую), затем пытается войти в помещение. Если в помещении есть свободные места, клиент входит и ждет своей очереди. Если все места заняты, клиент уходит. Когда клиенту приходит его очередь, он получает стрижку и уходит.
Процессы взаимодействуют через семафоры:

barber_semaphore используется парикмахером для оповещения о приходе клиента.

customer_semaphore используется клиентами для оповещения о завершении стрижки.

mutex_semaphore используется для синхронизации доступа к общей памяти, где хранится информация о количестве ожидающих клиентов и их порядковых номерах.

Когда программа завершает свою работу(любым способом), она освобождает ресурсы, включая семафоры и разделяемую память.

./main max_chairs

Далее представлены тесты программы, которые показывают стандартный вид работы программы, а также тест на корректный ввод программы и корректное завершение программы с помощью прерывания.

![text](/4-5/test1.png)

![text](/4-5/test2.png)

![text](/4-5/test3.png)

## Программа на 6-7 баллов
## Множество процессов взаимодействуют с использованием неименованных POSIX семафоров расположенных в разделяемой памяти. Обмен данными также ведется через разделяемую память в стандарте POSIX.

Основное отличие от предыдущей программы в том, что семафоры теперь хранятся не в разделяемой памяти, а также семафоры теперь неименованные. Логика программы остается такой же.

./main max_chairs

Далее представлены тесты программы, которые показывают стандартный вид работы программы, а также тест на корректный ввод программы и корректное завершение программы с помощью прерывания.


![text](/6-7/test4.png)

![text](/6-7/test5.png)

![text](/6-7/test6.png)
















